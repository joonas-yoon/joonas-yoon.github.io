"use strict";(function(a){a(function(){var b=Math.max;function c(){n.style.width=n.style.height="64px"}function d(){n.style.width=n.style.height="32px"}function e(){n.style.display="none"}function f(b){a(b).find("a").each(function(b,f){a(f).on("mouseover",function(){c(),n.style.background="#fbf074"}),a(f).on("mouseout",function(){d(),n.style.background="white"})})}function g(a,c){var d=this;this.speed=.3,this.dx=Math.random()*(.5>Math.random()?-1:1)*this.speed,this.dy=Math.random()*(.5>Math.random()?-1:1)*this.speed,this.dz=.1*(Math.random()*(.5>Math.random()?-1:1)),this.x=a,this.y=c,this.z=Math.random(),this.ix=0,this.iy=0,this.width=0,this.height=0;var e=function(a,b,c,d,e){a.beginPath(),a.arc(b,c,d,0,2*Math.PI),a.closePath(),a.fillStyle=e||"#000",a.fill()};return{getX:function getX(){return d.x},getY:function getY(){return d.y},set:function setXY(a,b){d.x=a,d.y=b},setVector:function setVector(a,b){d.dx=a,d.dy=b},getVector:function getVector(){return{dx:d.dx+d.ix,dy:d.dy+d.iy}},setBounds:function setBounds(a,b){d.width=a,d.height=b},drawLine:function drawLine(a,b,c,d){a.beginPath(),a.moveTo(b.getX(),b.getY()),a.lineTo(c.getX(),c.getY()),a.closePath(),a.lineWidth=1,a.strokeStyle=d||"#000",a.stroke()},drawCircle:e,draw:function draw(a){var c=(1.5-d.z)/200+.5;e(a,d.x,d.y,b(1,2-d.z),"rgba(255, 255, 255, "+c+")")},move:function move(){var a=d.x+d.dx+d.ix,b=d.y+d.dy+d.iy,c=d.z+d.dz;(0>=a||a>=d.width)&&(d.dx*=-1),(0>=b||b>=d.height)&&(d.dy*=-1),(0>=c||1.5<=c)&&(d.dz*=-1),d.x=a,d.y=b,d.z=c,d.dx+=.005*d.ix,d.dy+=.005*d.iy,d.ix*=.95,d.iy*=.95},getDistance:function distance(a){var b=d.x-a.getX(),c=d.y-a.getY();return Math.sqrt(b*b+c*c)},pushForce:function pushForce(a,b){d.ix+=a,d.iy+=b}}}function h(){q.width=window.innerWidth,q.height=window.innerHeight,t.forEach(function(a){a.setBounds(q.width,q.height)})}function j(){r.clearRect(0,0,q.width,q.height);var a=Math.min(window.innerWidth,window.innerHeight)/5;!1,t.forEach(function(c,d){for(var p,q=d+1;q<t.length;++q)if(p=c.getDistance(t[q]),150>p){var j=b(0,.8-p/150);c.drawLine(r,c,t[q],"rgba(255, 255, 255, "+j+")")}if(s.getX()!=1/0){var u=s.getDistance(c);if(u<=a){var e=c.getX()-s.getX(),f=c.getY()-s.getY(),h=a/u*e,i=a/u*f,k=new g(s.getX()+h,s.getY()+i),l=c.getVector(),m=l.dx,n=l.dy,o=u/a;c.pushForce(.001*((k.getX()-c.getX())*(1-o)),.001*((k.getY()-c.getY())*(1-o))),!1}}c.move(),c.draw(r)}),window.requestAnimationFrame(j)}var k=a(window),l=a("body"),m=a("#main");l.addClass("is-loading"),k.on("load",function(){window.setTimeout(function(){l.removeClass("is-loading")},100)});var n=document.getElementById("cursor");document.addEventListener("mousemove",function(a){n.style.top=a.pageY+"px",n.style.left=a.pageX+"px"}),document.addEventListener("mousedown",c),document.addEventListener("mouseup",d),document.addEventListener("touchstart",e,!1),document.addEventListener("touchend",e,!1),document.addEventListener("touchmove",e,!1),document.addEventListener("touchcancel",e,!1),f(document),a("#top a[href]").on("click",function(){a("#top").fadeOut()}),a(".overlay-close").on("click",function(){a("#top").fadeOut()}),a(".overlay-show").on("click",function(){a("#top").fadeIn()}),a(window).on("scroll",function(){var b=!1;a(".sidebar.navigator").find("a").each(function(a,c){var d=document.getElementById(c.href.split("#")[1]),e=d.getBoundingClientRect();!b&&0<=e.y&&e.y<window.innerHeight?(c.setAttribute("class","active"),b=!0):c.removeAttribute("class")})});var o=a("#modal"),p=o.find(".modal-wrapper");a("[modal-href]").each(function(b,c){c.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation();var d=c.getAttribute("modal-bg")||"#1b1b1b",e=c.getAttribute("modal-fg")||"white";p.css("background-color",d),p.css("color",e),p.find(".modal-close-button > svg").css("fill",e);var g=c.getAttribute("modal-href"),h=o.find("#modal-spinner"),i=o.find("#modal-content");i.html(""),h.show(),o.fadeIn(),a.ajax({url:"pages/"+g,dataType:"html",success:function success(a){i.html(a),f(i)},error:function error(a,b,c){i.html("<div class=\"error\"><h1>".concat(a.status,"</h1><p class=\"sorry\">Sorry, the page you tried cannot be found.</p><p class=\"detail\">").concat(b," ").concat(c,"</p></div>"))},complete:function complete(){h.hide()}})})}),a(".modal-bg").on("click",function(){o.fadeOut()}),a(".modal-close-button").on("click",function(){o.fadeOut()});var q=document.getElementById("canvas-bg"),r=q.getContext("2d");q.width=window.innerWidth,q.height=window.innerHeight;for(var s=new g(1/0,1/0),t=[],u=0;u<100+b(q.width,q.height)/20;++u)t.push(new g(Math.random()*q.width,Math.random()*q.height));window.addEventListener("mousemove",function(a){s.set(a.pageX,a.pageY)}),window.addEventListener("resize",h,!0),h(),window.requestAnimationFrame(j)})})(jQuery);