"use strict";(function(a){a(function(){var k=Math.max;function b(){q.style.width=q.style.height="64px"}function c(){q.style.width=q.style.height="32px"}function d(){q.style.display="none"}function e(d){a(d).find("a").each(function(d,f){a(f).on("mouseover",function(){b(),q.style.background="#fbf074"}),a(f).on("mouseout",function(){c(),q.style.background="white"})})}function f(a,b){var c=this;this.speed=.3,this.dx=Math.random()*(.5>Math.random()?-1:1)*this.speed,this.dy=Math.random()*(.5>Math.random()?-1:1)*this.speed,this.dz=.1*(Math.random()*(.5>Math.random()?-1:1)),this.x=a,this.y=b,this.z=Math.random(),this.width=0,this.height=0;var d=function(a,b,c,d,e){a.beginPath(),a.arc(b,c,d,0,2*Math.PI),a.closePath(),a.fillStyle=e||"#000",a.fill()};return{getX:function getX(){return c.x},getY:function getY(){return c.y},setBounds:function setBounds(a,b){c.width=a,c.height=b},drawLine:function drawLine(a,b,c,d){a.beginPath(),a.moveTo(b.getX(),b.getY()),a.lineTo(c.getX(),c.getY()),a.closePath(),a.lineWidth=1,a.strokeStyle=d||"#000",a.stroke()},drawCircle:d,draw:function draw(a){var b=(1.5-c.z)/200+.5;d(a,c.x,c.y,k(1,2-c.z),"rgba(255, 255, 255, "+b+")")},move:function move(){var a=c.x+c.dx,b=c.y+c.dy,d=c.z+c.dz;(0>=a||a>=c.width)&&(c.dx*=-1),(0>=b||b>=c.height)&&(c.dy*=-1),(0>=b||1.5<=b)&&(c.dz*=-1),c.x+=c.dx,c.y+=c.dy,c.z+=c.dz},getDistance:function distance(a){var b=c.x-a.getX(),d=c.y-a.getY();return Math.sqrt(b*b+d*d)}}}function g(){t.width=window.innerWidth,t.height=window.innerHeight,v.forEach(function(a){a.setBounds(t.width,t.height)})}function h(){u.clearRect(0,0,t.width,t.height),v.forEach(function(a,b){a.draw(u);for(var c,d=b+1;d<v.length;++d)if(c=a.getDistance(v[d]),150>c){var e=k(0,.8-c/150);a.drawLine(u,a,v[d],"rgba(255, 255, 255, "+e+")")}a.move()}),window.requestAnimationFrame(h)}var l=a(window),m=a("body"),n=a("#main");m.addClass("is-loading"),l.on("load",function(){window.setTimeout(function(){m.removeClass("is-loading")},100)});var o=document.getElementById("video-anim"),p=o.querySelector("video");if(function(){var a=navigator.userAgent,b=-1!==a.indexOf("MSIE")||-1!==a.indexOf("Trident"),c=!!a.match(/Version\/[\d\.]+.*Safari/)||-1!==a.indexOf("Mac");return b||c}()||!document.createElement("video").canPlayType)o.querySelector("img").style.display="block",p.style.display="none";else{p.style.display="block",p.autoplay=!0,p.muted=!0,p.controls=!1,p.load();var j=p.play();j!==void 0&&j.then(function(){})["catch"](function(a){o.querySelector("img").style.display="block",p.style.display="none",console.error(a)})}var q=document.getElementById("cursor");document.addEventListener("mousemove",function(a){q.style.top=a.pageY+"px",q.style.left=a.pageX+"px"}),document.addEventListener("mousedown",b),document.addEventListener("mouseup",c),document.addEventListener("touchstart",d,!1),document.addEventListener("touchend",d,!1),document.addEventListener("touchmove",d,!1),document.addEventListener("touchcancel",d,!1),e(document),a("#top a[href]").on("click",function(){a("#top").fadeOut()}),a(".overlay-close").on("click",function(){a("#top").fadeOut()}),a(".overlay-show").on("click",function(){a("#top").fadeIn()}),a(window).on("scroll",function(){var b=!1;a(".sidebar.navigator").find("a").each(function(a,c){var d=document.getElementById(c.href.split("#")[1]),e=d.getBoundingClientRect();!b&&0<=e.y&&e.y<window.innerHeight?(c.setAttribute("class","active"),b=!0):c.removeAttribute("class")})});var r=a("#modal"),s=r.find(".modal-wrapper");a("[modal-href]").each(function(b,c){c.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation();var d=c.getAttribute("modal-bg")||"#1b1b1b",f=c.getAttribute("modal-fg")||"white";s.css("background-color",d),s.css("color",f),s.find(".modal-close-button > svg").css("fill",f);var g=c.getAttribute("modal-href"),h=r.find("#modal-spinner"),i=r.find("#modal-content");i.html(""),h.show(),r.fadeIn(),a.ajax({url:"pages/"+g,dataType:"html",success:function success(a){i.html(a),e(i)},error:function error(a,b,c){i.html("<div class=\"error\"><h1>".concat(a.status,"</h1><p class=\"sorry\">Sorry, the page you tried cannot be found.</p><p class=\"detail\">").concat(b," ").concat(c,"</p></div>"))},complete:function complete(){h.hide()}})})}),a(".modal-bg").on("click",function(){r.fadeOut()}),a(".modal-close-button").on("click",function(){r.fadeOut()});var t=document.getElementById("canvas-bg"),u=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;for(var v=[],w=0;w<50+t.width/20;++w)v.push(new f(Math.random()*t.width,Math.random()*t.height));window.addEventListener("resize",g,!0),g(),window.requestAnimationFrame(h)})})(jQuery);